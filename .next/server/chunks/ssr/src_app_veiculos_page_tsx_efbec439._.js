module.exports=[88656,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(45209);let f=[{id:"1",nome:"João Silva",email:"joao.silva@email.pt",telefone:"+351 912 345 678",nif:"234 567 890",endereco:"Rua das Flores, 123, Porto",perfil:"Normal",veiculos:2,dataRegistro:"2021",totalGasto:1250.5,visitas:8},{id:"2",nome:"Ana Costa",email:"ana.costa@email.pt",telefone:"+351 966 555 444",nif:"198 765 432",endereco:"Avenida da Liberdade, 456, Lisboa",perfil:"TVDE Interno",veiculos:1,dataRegistro:"2022",totalGasto:890.75,visitas:5},{id:"3",nome:"Pedro Martins",email:"pedro.martins@email.pt",telefone:"+351 927 123 456",nif:"145 678 901",endereco:"Rua do Comércio, 78, Coimbra",perfil:"Normal",veiculos:1,dataRegistro:"2020",totalGasto:2100.25,visitas:12},{id:"4",nome:"Maria Santos",email:"maria.santos@email.pt",telefone:"+351 934 567 890",nif:"267 890 123",endereco:"Praça da República, 45, Faro",perfil:"Normal",veiculos:1,dataRegistro:"2023",totalGasto:450,visitas:3},{id:"5",nome:"Carlos Ferreira",email:"carlos.ferreira@email.pt",telefone:"+351 918 234 567",nif:"378 901 234",endereco:"Avenida dos Aliados, 234, Porto",perfil:"Empresa",veiculos:3,dataRegistro:"2019",totalGasto:3200.8,visitas:18},{id:"6",nome:"Sofia Rodrigues",email:"sofia.rodrigues@email.pt",telefone:"+351 965 678 901",nif:"489 012 345",endereco:"Rua Augusta, 67, Lisboa",perfil:"Normal",veiculos:1,dataRegistro:"2022",totalGasto:675.3,visitas:4},{id:"7",nome:"Miguel Pereira",email:"miguel.pereira@email.pt",telefone:"+351 922 345 678",nif:"590 123 456",endereco:"Rua de Santa Catarina, 89, Porto",perfil:"TVDE Interno",veiculos:2,dataRegistro:"2021",totalGasto:1580.9,visitas:9},{id:"8",nome:"Isabel Oliveira",email:"isabel.oliveira@email.pt",telefone:"+351 936 789 012",nif:"601 234 567",endereco:"Avenida Almirante Reis, 123, Lisboa",perfil:"Normal",veiculos:1,dataRegistro:"2023",totalGasto:320.5,visitas:2}],g=a=>f.find(b=>b.id===a);function h({vehicles:a,onViewHistory:e,onEdit:f,onDelete:h}){let[i,j]=(0,c.useState)(""),k=a.filter(a=>{let b=g(a.clientId),c=i.toLowerCase();return a.licensePlate.toLowerCase().includes(c)||(b?.nome||"").toLowerCase().includes(c)||a.make.toLowerCase().includes(c)||a.model.toLowerCase().includes(c)});return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"bg-gray-700 border border-gray-600 p-4 rounded-none flex flex-col md:flex-row gap-4",children:(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,b.jsx)("input",{type:"text",placeholder:"Pesquisar por matrícula, cliente, marca ou modelo...",value:i,onChange:a=>j(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 text-white rounded-none focus:ring-1 focus:ring-brand-yellow focus:border-brand-yellow placeholder-gray-500"})]})}),(0,b.jsx)("div",{className:"bg-gray-700 border border-gray-600 rounded-none overflow-hidden shadow-sm",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left text-gray-400",children:[(0,b.jsx)("thead",{className:"text-xs text-gray-300 uppercase bg-gray-800 border-b border-gray-600",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Matrícula"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Marca / Modelo"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Cliente"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Ano"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Última Intervenção"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-center",children:"Ações"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-600",children:k.map(a=>{let c=a.clientName||g(a.clientId)?.nome||"Cliente não encontrado";return(0,b.jsxs)("tr",{className:"hover:bg-gray-600 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-medium text-gray-100 font-mono",children:a.licensePlate}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-200",children:`${a.make} ${a.model}`}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-300",children:c}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-400",children:a.year}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-300",children:a.lastIntervention}),(0,b.jsx)("td",{className:"px-6 py-4 text-center",children:(0,b.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>e(a),className:"text-brand-yellow hover:text-brand-yellow-light transition-colors",title:"Ver histórico",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)(d.default,{href:`/veiculos/${a.id}/edit`,className:"text-blue-400 hover:text-blue-300 transition-colors",title:"Editar veículo",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,b.jsx)("button",{onClick:()=>{window.confirm("Tem certeza que deseja apagar este veículo?")&&h?.(a.id)},className:"text-red-400 hover:text-red-300 transition-colors",title:"Apagar veículo",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id)})})]})})})]})}let i=[{id:"1",proc:"C2045",date:"28/10/2024",description:"Revisão Geral + Mudança de Óleo",km:125e3,cost:250},{id:"2",proc:"C1980",date:"15/05/2024",description:"Substituição Pastilhas Travão (Frente)",km:118e3,cost:120.5},{id:"3",proc:"TVDE055",date:"10/01/2024",description:"Bateria Nova",km:112e3,cost:95}];function j({isOpen:a,onClose:c,vehicle:d}){return a&&d?(0,b.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-600 w-full max-w-3xl p-6 shadow-2xl relative",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-6 border-b border-gray-700 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-100",children:"Histórico de Reparações"}),(0,b.jsxs)("p",{className:"text-sm text-brand-yellow font-mono mt-1",children:[d.plate," - ",d.makeModel]})]}),(0,b.jsx)("button",{type:"button",onClick:c,className:"text-gray-400 hover:text-white",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"overflow-y-auto max-h-96",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left text-gray-400",children:[(0,b.jsx)("thead",{className:"text-xs text-gray-500 uppercase bg-gray-900 sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3",children:"N. Proc."}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Data"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Descrição"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Km"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"Custo"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-700",children:i.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-4 py-3 font-mono text-brand-yellow",children:a.proc}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.date}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-200",children:a.description}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.km.toLocaleString()}),(0,b.jsxs)("td",{className:"px-4 py-3 text-right font-medium text-gray-200",children:["€",a.cost.toFixed(2)]})]},a.id))})]})}),(0,b.jsx)("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-700",children:(0,b.jsx)("button",{type:"button",onClick:c,className:"px-4 py-2 bg-brand-yellow text-gray-900 font-bold hover:bg-brand-yellow-dark transition-colors rounded-none",children:"Fechar"})})]})}):null}function k(){let[a,f]=(0,c.useState)([]),[i,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),r=async()=>{try{k(!0);let a=await fetch("/api/veiculos");if(a.ok){let b=await a.json();f(b)}else m("Failed to fetch vehicles")}catch(a){m("Failed to fetch vehicles"),console.error("Error fetching vehicles:",a)}finally{k(!1)}};(0,c.useEffect)(()=>{r()},[]);let s=async a=>{try{(await fetch(`/api/veiculos/${a}`,{method:"DELETE"})).ok&&f(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Failed to delete vehicle:",a)}};return(0,b.jsxs)("div",{className:"flex h-screen bg-gray-800",children:[(0,b.jsx)(e.default,{activePage:"veiculos"}),(0,b.jsxs)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none p-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-100 leading-tight",children:"Veículos"}),(0,b.jsx)("p",{className:"mt-1 text-gray-400",children:"Gerencie a frota de veículos"})]}),(0,b.jsxs)(d.default,{href:"/veiculos/novo",className:"px-4 py-2 bg-brand-yellow-dark text-white font-bold hover:bg-yellow-600 transition-colors rounded-none flex items-center shadow-md",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Novo Veículo"]})]}),i?(0,b.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,b.jsx)("div",{className:"text-gray-400",children:"Carregando veículos..."})}):l?(0,b.jsxs)("div",{className:"bg-red-900 border border-red-700 text-red-200 p-4 rounded-none",children:["Erro ao carregar veículos: ",l]}):(0,b.jsx)(h,{vehicles:a,onViewHistory:a=>{o({id:a.id,plate:a.licensePlate,makeModel:`${a.make} ${a.model}`,client:g(a.clientId)?.nome||"Cliente não encontrado",year:a.year,lastIntervention:a.lastIntervention}),q(!0)},onDelete:s})]}),(0,b.jsx)(j,{isOpen:p,onClose:()=>q(!1),vehicle:n})]})}a.s(["default",()=>k],88656)}];

//# sourceMappingURL=src_app_veiculos_page_tsx_efbec439._.js.map